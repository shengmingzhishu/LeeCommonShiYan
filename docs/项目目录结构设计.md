# 灵力检测实验室项目目录结构设计

## 1. 整体项目结构

```
LeeCommonShiYan/
├── README.md                                    # 项目说明文档
├── docs/                                        # 项目文档
│   ├── 系统架构设计.md
│   ├── 数据库设计.md
│   ├── API接口设计规范.md
│   ├── 项目目录结构设计.md
│   ├── 开发规范.md
│   ├── 部署文档.md
│   └── api/                                     # API文档
│       └── swagger/
├── backend/                                     # Java后端项目
│   ├── common/                                  # 公共模块
│   ├── gateway/                                 # 网关服务
│   ├── auth-service/                            # 用户认证服务
│   ├── user-service/                            # 用户服务
│   ├── product-service/                         # 商品服务
│   ├── order-service/                           # 订单服务
│   ├── payment-service/                         # 支付服务
│   ├── logistics-service/                       # 物流服务
│   ├── report-service/                          # 报告服务
│   ├── admin-service/                           # 管理服务
│   └── scripts/                                 # 部署脚本
├── frontend/                                    # 前端项目
│   ├── mini-program/                           # UniApp小程序
│   └── admin-web/                              # 管理后台
├── database/                                    # 数据库脚本
│   ├── init/                                   # 初始化脚本
│   ├── migration/                              # 数据库迁移脚本
│   └── seeds/                                  # 种子数据
├── docker/                                      # Docker配置
│   ├── docker-compose.yml                      # 本地开发环境
│   ├── docker-compose.prod.yml                 # 生产环境
│   ├── mysql/                                  # MySQL配置
│   ├── redis/                                  # Redis配置
│   └── nginx/                                  # Nginx配置
├── logs/                                        # 日志目录
├── target/                                      # 编译输出目录
└── pom.xml                                      # Maven配置（父项目）
```

## 2. Java后端目录结构

### 2.1 父级Maven项目
```xml
# pom.xml (根目录)
<modules>
    <module>common</module>
    <module>gateway</module>
    <module>auth-service</module>
    <module>user-service</module>
    <module>product-service</module>
    <module>order-service</module>
    <module>payment-service</module>
    <module>logistics-service</module>
    <module>report-service</module>
    <module>admin-service</module>
</modules>
```

### 2.2 公共模块 (common)
```
backend/common/
├── pom.xml
├── src/
│   └── main/
│       ├── java/
│       │   └── com/
│       │       └── lingli/
│       │           └── common/
│       │               ├── annotation/           # 自定义注解
│       │               ├── config/              # 配置类
│       │               ├── constant/            # 常量类
│       │               ├── core/                # 核心类
│       │               │   ├── BaseEntity.java  # 实体基类
│       │               │   ├── Result.java      # 统一返回结果
│       │               │   └── PageResult.java  # 分页结果
│       │               ├── dto/                 # 数据传输对象
│       │               ├── entity/              # 实体类
│       │               ├── enums/               # 枚举类
│       │               ├── exception/           # 异常类
│       │               ├── mapper/              # 数据访问层
│       │               ├── service/             # 服务接口
│       │               ├── utils/               # 工具类
│       │               └── vo/                  # 视图对象
│       └── resources/
│           └── application.yml
└── target/
```

### 2.3 认证服务 (auth-service)
```
backend/auth-service/
├── pom.xml
├── src/
│   └── main/
│       ├── java/
│       │   └── com/
│       │       └── lingli/
│       │           └── auth/
│       │               ├── AuthServiceApplication.java
│       │               ├── controller/          # 控制器层
│       │               ├── service/             # 业务逻辑层
│       │               ├── impl/                # 服务实现
│       │               └── config/              # 配置类
│       └── resources/
│           ├── application.yml
│           └── mapper/                        # MyBatis映射文件
└── target/
```

### 2.4 完整微服务结构示例 (user-service)
```
backend/user-service/
├── pom.xml
├── src/
│   └── main/
│       ├── java/
│       │   └── com/
│       │       └── lingli/
│       │           └── user/
│       │               ├── UserServiceApplication.java
│       │               ├── controller/          # Web控制器
│       │               │   ├── UserController.java
│       │               │   ├── ProfileController.java
│       │               │   └── SamplerController.java
│       │               ├── service/             # 业务接口
│       │               │   ├── UserService.java
│       │               │   ├── ProfileService.java
│       │               │   └── SamplerService.java
│       │               ├── impl/                # 业务实现
│       │               │   ├── UserServiceImpl.java
│       │               │   ├── ProfileServiceImpl.java
│       │               │   └── SamplerServiceImpl.java
│       │               ├── dto/                 # 请求DTO
│       │               │   ├── user/
│       │               │   │   ├── RegisterDTO.java
│       │               │   │   ├── LoginDTO.java
│       │               │   │   └── UpdatePasswordDTO.java
│       │               │   ├── profile/
│       │               │   │   ├── ProfileDTO.java
│       │               │   │   └── UpdateProfileDTO.java
│       │               │   └── sampler/
│       │               │       ├── SamplerDTO.java
│       │               │       ├── AddSamplerDTO.java
│       │               │       └── UpdateSamplerDTO.java
│       │               ├── vo/                  # 响应VO
│       │               │   ├── UserVO.java
│       │               │   ├── ProfileVO.java
│       │               │   └── SamplerVO.java
│       │               ├── entity/              # 实体类
│       │               │   ├── User.java
│       │               │   ├── UserProfile.java
│       │               │   └── Sampler.java
│       │               ├── mapper/              # 数据访问层
│       │               │   ├── UserMapper.java
│       │               │   ├── UserProfileMapper.java
│       │               │   └── SamplerMapper.java
│       │               ├── config/              # 配置类
│       │               │   ├── SecurityConfig.java
│       │               │   ├── RedisConfig.java
│       │               │   └── MybatisPlusConfig.java
│       │               ├── exception/           # 异常处理
│       │               │   └── BusinessException.java
│       │               └── utils/               # 工具类
│       │                   ├── JwtUtils.java
│       │                   ├── PasswordUtils.java
│       │                   └── ValidationUtils.java
│       └── resources/
│           ├── application.yml                # 应用配置
│           ├── mapper/                        # MyBatis XML映射
│           │   ├── UserMapper.xml
│           │   ├── UserProfileMapper.xml
│           │   └── SamplerMapper.xml
│           └── bootstrap.yml                  # 启动配置
└── target/
```

### 2.5 其他微服务模块结构
```
backend/product-service/           # 商品服务
backend/order-service/             # 订单服务
backend/payment-service/           # 支付服务
backend/logistics-service/         # 物流服务
backend/report-service/            # 报告服务
backend/admin-service/             # 管理服务

# 每个服务的结构与user-service相同
```

### 2.6 网关服务 (gateway)
```
backend/gateway/
├── pom.xml
├── src/
│   └── main/
│       ├── java/
│       │   └── com/
│       │       └── lingli/
│       │           └── gateway/
│       │               ├── GatewayApplication.java
│       │               ├── config/              # 路由配置
│       │               ├── filter/              # 全局过滤器
│       │               └── handler/             # 异常处理
│       └── resources/
│           ├── application.yml
│           └── bootstrap.yml
└── target/
```

## 3. UniApp小程序目录结构

### 3.1 根目录结构
```
frontend/mini-program/
├── pages/                             # 页面目录
├── components/                        # 组件目录
├── static/                           # 静态资源
├── store/                            # 状态管理
├── utils/                            # 工具类
├── api/                              # API接口
├── manifest.json                     # 小程序配置
├── pages.json                        # 页面配置
├── uni.scss                          # 全局样式
├── App.vue                           # 应用入口
├── main.js                           # 主入口文件
└── package.json                      # 依赖配置
```

### 3.2 页面结构 (pages)
```
frontend/mini-program/pages/
├── index/                            # 首页
│   ├── index.vue
│   ├── index.js
│   ├── index.json
│   └── index.scss
├── auth/                             # 认证相关
│   ├── login/                        # 登录页
│   └── register/                     # 注册页
├── product/                          # 商品相关
│   ├── list/                         # 商品列表
│   ├── detail/                       # 商品详情
│   └── category/                     # 商品分类
├── cart/                             # 购物车
│   └── cart.vue
├── order/                            # 订单相关
│   ├── list/                         # 订单列表
│   ├── detail/                       # 订单详情
│   ├── confirm/                      # 确认订单
│   └── payment/                      # 支付页面
├── user/                             # 用户中心
│   ├── profile/                      # 个人资料
│   ├── samplers/                     # 采样人管理
│   └── address/                      # 地址管理
└── report/                           # 报告相关
    ├── list/                         # 报告列表
    └── detail/                       # 报告详情
```

### 3.3 组件结构 (components)
```
frontend/mini-program/components/
├── common/                           # 通用组件
│   ├── nav-bar/                      # 导航栏
│   ├── tab-bar/                      # 底部标签栏
│   ├── loading/                      # 加载组件
│   ├── empty/                        # 空数据组件
│   └── modal/                        # 弹窗组件
├── product/                          # 商品相关组件
│   ├── package-card/                 # 套餐卡片
│   ├── package-swiper/               # 套餐轮播
│   └── filter-bar/                   # 筛选栏
└── order/                            # 订单相关组件
    ├── order-item/                   # 订单项
    ├── order-status/                 # 订单状态
    └── payment-methods/              # 支付方式
```

### 3.4 工具类结构 (utils)
```
frontend/mini-program/utils/
├── api.js                            # API请求封装
├── auth.js                           # 认证工具
├── storage.js                        # 本地存储
├── validate.js                       # 表单验证
├── format.js                         # 格式化工具
├── request.js                        # 网络请求
├── config.js                         # 配置文件
└── constants.js                      # 常量定义
```

### 3.5 状态管理 (store)
```
frontend/mini-program/store/
├── modules/                          # 模块
│   ├── user.js                       # 用户状态
│   ├── cart.js                       # 购物车状态
│   ├── order.js                      # 订单状态
│   └── app.js                        # 应用状态
├── actions.js                        # Action定义
├── getters.js                        # Getter定义
└── index.js                          # Store入口
```

## 4. Web管理后台目录结构

### 4.1 根目录结构
```
frontend/admin-web/
├── public/                           # 静态资源
├── src/                             # 源码目录
├── tests/                           # 测试目录
├── .env                             # 环境配置
├── .env.development                 # 开发环境
├── .env.production                  # 生产环境
├── .env.staging                     # 测试环境
├── .gitignore
├── .eslintrc.js                     # ESLint配置
├── .prettierrc                      # Prettier配置
├── babel.config.js                  # Babel配置
├── package.json                     # 依赖配置
├── vue.config.js                    # Vue配置
└── README.md                        # 项目说明
```

### 4.2 源码结构 (src)
```
frontend/admin-web/src/
├── main.js                          # 入口文件
├── App.vue                          # 根组件
├── router/                          # 路由配置
│   ├── index.js                     # 路由主文件
│   ├── routes/                      # 路由定义
│   │   ├── index.js                 # 路由配置
│   │   ├── user.js                  # 用户管理路由
│   │   ├── product.js               # 商品管理路由
│   │   ├── order.js                 # 订单管理路由
│   │   ├── system.js                # 系统管理路由
│   │   └── report.js                # 报告管理路由
│   └── guards/                      # 路由守卫
│       ├── auth.js                  # 认证守卫
│       └── permission.js            # 权限守卫
├── store/                           # 状态管理
│   ├── modules/                     # 模块
│   │   ├── user.js                  # 用户模块
│   │   ├── app.js                   # 应用模块
│   │   ├── permission.js            # 权限模块
│   │   └── tagsView.js              # 标签页模块
│   ├── actions.js                   # 全局Action
│   ├── getters.js                   # 全局Getter
│   └── index.js                     # Store入口
├── api/                             # API接口
│   ├── user.js                      # 用户相关API
│   ├── product.js                   # 商品相关API
│   ├── order.js                     # 订单相关API
│   ├── system.js                    # 系统相关API
│   ├── auth.js                      # 认证相关API
│   └── http.js                      # HTTP封装
├── views/                           # 页面组件
│   ├── layout/                      # 布局组件
│   │   ├── Layout.vue               # 主布局
│   │   ├── components/              # 布局组件
│   │   │   ├── Sidebar.vue          # 侧边栏
│   │   │   ├── Navbar.vue           # 顶部导航
│   │   │   ├── TagsView.vue         # 标签页
│   │   │   └── AppMain.vue          # 主内容区
│   │   └── index.js                 # 布局入口
│   ├── login/                       # 登录页面
│   │   └── Login.vue
│   ├── dashboard/                   # 仪表盘
│   │   └── Dashboard.vue
│   ├── user/                        # 用户管理
│   │   ├── UserList.vue             # 用户列表
│   │   ├── UserEdit.vue             # 用户编辑
│   │   └── UserDetail.vue           # 用户详情
│   ├── product/                     # 商品管理
│   │   ├── PackageList.vue          # 套餐列表
│   │   ├── PackageEdit.vue          # 套餐编辑
│   │   ├── CategoryList.vue         # 分类列表
│   │   └── CategoryEdit.vue         # 分类编辑
│   ├── order/                       # 订单管理
│   │   ├── OrderList.vue            # 订单列表
│   │   ├── OrderDetail.vue          # 订单详情
│   │   └── OrderStatistics.vue      # 订单统计
│   ├── system/                      # 系统管理
│   │   ├── CompanyList.vue          # 公司管理
│   │   ├── CompanyEdit.vue          # 公司编辑
│   │   ├── CityList.vue             # 城市管理
│   │   ├── CityEdit.vue             # 城市编辑
│   │   └── UserManagement.vue       # 用户管理
│   └── report/                      # 报告管理
│       ├── ReportList.vue           # 报告列表
│       ├── ReportUpload.vue         # 报告上传
│       └── ReportDetail.vue         # 报告详情
├── components/                      # 公共组件
│   ├── Pagination.vue               # 分页组件
│   ├── SearchForm.vue               # 搜索表单
│   ├── DataTable.vue                # 数据表格
│   ├── UploadFile.vue               # 文件上传
│   ├── ImageUpload.vue              # 图片上传
│   ├── RichText.vue                 # 富文本编辑
│   └── CommonDialog.vue             # 通用弹窗
├── utils/                           # 工具类
│   ├── auth.js                      # 认证工具
│   ├── storage.js                   # 本地存储
│   ├── validate.js                  # 表单验证
│   ├── format.js                    # 格式化工具
│   ├── request.js                   # 网络请求
│   ├── constants.js                 # 常量定义
│   └── index.js                     # 工具类入口
├── styles/                          # 样式文件
│   ├── variables.scss               # SCSS变量
│   ├── mixins.scss                  # SCSS混入
│   ├── global.scss                  # 全局样式
│   └── index.scss                   # 样式入口
├── plugins/                         # 插件
│   ├── element.js                   # Element UI
│   ├── axios.js                     # Axios配置
│   └── index.js                     # 插件入口
└── directives/                      # 自定义指令
    ├── permission.js                # 权限指令
    └── loading.js                   # 加载指令
```

## 5. 数据库目录结构

### 5.1 脚本分类
```
database/
├── init/                            # 初始化脚本
│   ├── 01_create_database.sql       # 创建数据库
│   ├── 02_create_tables.sql         # 创建表结构
│   └── 03_create_indexes.sql        # 创建索引
├── migration/                       # 数据库迁移
│   ├── V1__init.sql                 # V1版本
│   ├── V2__add_user_company.sql     # V2版本
│   └── V3__add_order_items.sql      # V3版本
└── seeds/                           # 种子数据
    ├── 01_cities.sql                # 城市数据
    ├── 02_companies.sql             # 公司数据
    ├── 03_categories.sql            # 分类数据
    ├── 04_packages.sql              # 套餐数据
    └── 05_admin_user.sql            # 管理员用户
```

## 6. Docker配置目录

### 6.1 开发环境
```
docker/
├── docker-compose.yml               # 本地开发环境
├── docker-compose.override.yml      # 开发环境覆盖
├── .env.development                 # 开发环境变量
└── .env.production                 # 生产环境变量
```

### 6.2 服务配置
```
docker/
├── mysql/                           # MySQL配置
│   ├── Dockerfile
│   ├── my.cnf
│   └── init/                       # 初始化脚本
├── redis/                           # Redis配置
│   ├── Dockerfile
│   └── redis.conf
└── nginx/                           # Nginx配置
    ├── Dockerfile
    ├── nginx.conf
    └── conf.d/                     # 虚拟主机配置
        ├── default.conf
        ├── admin.conf
        └── api.conf
```

## 7. 配置说明

### 7.1 Maven配置
```xml
# parent pom.xml - 依赖版本管理
<properties>
    <java.version>11</java.version>
    <spring-boot.version>2.7.8</spring-boot.version>
    <spring-cloud.version>2021.0.5</spring-cloud.version>
    <mybatis-plus.version>3.5.3.1</mybatis-plus.version>
    <mysql.version>8.0.33</mysql.version>
    <redis.version>3.1.5</redis.version>
    <jwt.version>0.11.5</jwt.version>
</properties>
```

### 7.2 环境配置
```yaml
# application.yml
spring:
  profiles:
    active: dev
    
---
# application-dev.yml - 开发环境
server:
  port: 8080
  
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/lingli_dev
    username: root
    password: root
  redis:
    host: localhost
    port: 6379

---
# application-prod.yml - 生产环境
server:
  port: 8080
  
spring:
  datasource:
    url: jdbc:mysql://prod-db:3306/lingli_prod
    username: ${DB_USERNAME}
    password: ${DB_PASSWORD}
  redis:
    host: ${REDIS_HOST}
    port: ${REDIS_PORT}
```

### 7.3 小程序配置
```json
// manifest.json
{
  "name": "灵力检测小程序",
  "appid": "wx1234567890abcdef",
  "description": "灵力检测实验室小程序",
  "versionName": "1.0.0",
  "versionCode": "100",
  "transformPx": false,
  "app-plus": {
    "usingComponents": true
  }
}
```

## 8. 构建脚本

### 8.1 后端构建脚本
```bash
# build.sh
#!/bin/bash
set -e

# 清理并编译
mvn clean install -DskipTests

# 构建Docker镜像
docker build -t lingli/auth-service:latest ./backend/auth-service
docker build -t lingli/user-service:latest ./backend/user-service
# ... 其他服务

# 启动服务
docker-compose up -d
```

### 8.2 前端构建脚本
```bash
# build-frontend.sh
#!/bin/bash
set -e

# 安装依赖
npm install

# 构建小程序
npm run build:h5

# 构建管理后台
npm run build:admin

# 上传到CDN
aws s3 sync dist/ s3://lingli-frontend/
```

## 9. 开发规范

### 9.1 代码结构规范
- Controller → Service → Mapper 三层架构
- DTO、VO、Entity 严格分离
- 统一的异常处理和日志记录
- 完整的单元测试覆盖

### 9.2 命名规范
- 类名：大驼峰命名 (UserService)
- 方法名：小驼峰命名 (getUserInfo)
- 变量名：小驼峰命名 (userName)
- 常量名：全大写，下划线分隔 (USER_STATUS)
- 数据库表名：小写，下划线分隔 (user_profile)
- 数据库字段名：小写，下划线分隔 (user_id)

### 9.3 注释规范
- 类和接口必须有JavaDoc注释
- 重要方法必须有注释说明
- 复杂业务逻辑需要详细注释
- 数据库字段必须有注释说明

## 10. 部署架构

### 10.1 开发环境
- 单体应用架构
- 本地MySQL + Redis
- 静态资源本地存储

### 10.2 生产环境
- 微服务架构
- 读写分离MySQL集群
- Redis集群
- 对象存储 (OSS/COS)
- CDN加速
- 负载均衡 (Nginx)
- 容器化部署 (Docker + Kubernetes)